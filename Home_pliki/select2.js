define("bundles/kingappcommon/js/select2",["jquery","select2","jquery-ui"],function(e){function t(e){var t=e.parent();e.detach(),t.append(e)}function n(e,t){return t?(t.attr("data-id",e.id),t.append(e.text),t):e.text}function i(t,n){return t.element&&e(n).addClass(e(t.element).attr("class")),t.text}return function(){e("select").on("change initialize",function(){e(this).parent(".box").toggleClass("select-empty",!this.value).toggleClass("select-multi",this.multiple)}).trigger("initialize").parent(".box").addClass("select-node"),e("select:not([data-ajax-select])").each(function(){var l=e(this);this.required&&l.find('option[value=""]').remove();var a={width:"style",minimumResultsForSearch:20,dropdownParent:l.parent(),escapeMarkup:function(e){return e},templateResult:function(e,t){return i(e,t)},templateSelection:function(e,t){return i(e,t)}};this.multiple&&(this.required&&(a.placeholder=this.dataset.placeholder),a.templateSelection=n,l.on("select2:select",function(n){var i=n.params.data.id;t(e(this).children("option[value="+i+"]")),e(this).trigger("change")})),this.multiple||this.required||!e(this).find('option[value=""]').length||(a.placeholder||(a.placeholder=e(this).find('option[value=""]')[0].text),a.allowClear=!0),a.placeholder&&e(this).find('option[value=""]').text(a.placeholder),l.select2(a),l.parent().find("ul.select2-selection__rendered").sortable({containment:"parent",update:function(){l.parent().find("ul.select2-selection__rendered").children("li[data-id]").each(function(n,i){t(l.children("option[value="+e(i).data("id")+"]"))})}})})}});
define("bundles/kingappcategory/js/form/tree",["jquery","bundles/kingapppage/js/search/hitCount","bundles/kingappcommon/js/browser","bundles/kingapppage/js/search/search"],function(e,t,n){var r,a=e("body");function c(t){e(t.target).closest("[data-level]").toggleClass("active")}function o(c){e('[name="'+e(c.target).attr("name")+'"]').filter(function(){return!e(this).closest(".category-frontend-tree").length}).prop("disabled",!0);var o=e(c.currentTarget).closest(".category-frontend-tree");n.isMobile()&&!r?(t.change(),o.find("input").prop("checked",!1),o.find(".active").removeClass("active"),e(c.currentTarget).prop("checked",!0),i(e(c.currentTarget))):(o.find("input").prop("disabled",!0),e(c.currentTarget).prop("disabled",!1),a.trigger("page.search"))}function i(e){(e=e.closest("[data-level]")).addClass("active"),e.data("level")&&i(e.parent())}return function(n){t.set(n.url),r=n.reload,n.openOnClick?e(".category-frontend-tree").on("click","label",c):e(".category-frontend-tree").on("change","input",o),function(){var t,n,r;if(e.each(window.location.search.replace("?","").split("&"),function(){t=this.split("="),i(n=e(".category-frontend-tree").find(':input[name="'+t[0]+'"][data-node="'+t[1]+'"]').prop("checked",!0)),n.length&&(r=!0)}),!r&&a.hasClass("category-section")){var c=a.attr("class").replace(/.*page-id-(\d+).*/,"$1");i(e(".category-frontend-tree").find("[data-node="+c+"]").prop("checked",!0))}}()}});